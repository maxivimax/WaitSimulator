<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Wait Simulator</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="robots" content="noindex, nofollow" />

    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <div class="outer">
      <container class="UpCon">
        <div>Wait-t-t</div>

        <div id="wallet">
          <span id="energy">
            <span id="energyIcon">âš¡</span>
            <span id="energyCount">5</span>
          </span>
          |
          <span id="timeFaster">
            <span id="timeFasterIcon">ðŸ’¨</span>
            <span id="timeFasterCount">0x</span>
          </span>
        </div>
      </container>

      <container class="MiddleCon">
        <div id="stopwatch">00:00:00</div>
        <div id="score">0</div>
      </container>

      <container class="DownCon">
        <button class="DownButton"><div class="DBN">Click</div></button>
        <button class="DownButton">
          <div class="DBN">Stop</div>
          <div class="DBM">game</div>
        </button>
        <button class="DownButton">
          <div class="DBN">Time</div>
          <div class="DBM">store</div>
        </button>
        <button class="DownButton">
          <div class="DBN">Score</div>
          <div class="DBM">store</div>
        </button>
      </container>
    </div>

    <script type="text/javascript">
      var stopwatch = document.getElementById('stopwatch')

      var score = 0
      var sec = 0
      var min = 0
      var hrs = 0
      var t

      function tick() {
        if (ec > 0) {
          sec++
          if (sec >= 60) {
            sec = 0
            min++
            if (min >= 60) {
              min = 0
              hrs++
            }
          }
        }
      }
      function add() {
        tick()
        stopwatch.innerHTML =
          (hrs > 9 ? hrs : '0' + hrs) +
          ':' +
          (min > 9 ? min : '0' + min) +
          ':' +
          (sec > 9 ? sec : '0' + sec)
        timer()
      }
      function timer() {
        t = setTimeout(add, 1000)
      }

      function gameFinished() {
        totalPoints = score

        clearTimeout(t)

        var httpRequest = new XMLHttpRequest()
        httpRequest.open(
          'GET',
          'submitScore/' + totalPoints + location.search,
          true,
        )
        httpRequest.send(null)
      }

      timer()
    </script>
    <script type="text/javascript">
      var energyCount = document.getElementById('energyCount')
      var timeFasterCount = document.getElementById('timeFasterCount')

      var ec = 5
      var tfc = 0

      var tickTime = 0

      function tickC() {
        if (tickTime == 60) {
          if (ec != 0) {
            ec--
          }
          tickTime = 0
        } else {
          tickTime++
        }
      }
      function addC() {
        tickC()
        energyCount.innerHTML = ec
        timeFasterCount.innerHTML = tfc + 'x'
        timerC()
      }
      function timerC() {
        t = setTimeout(addC, 1000)
      }

      timerC()
    </script>
  </body>
</html>